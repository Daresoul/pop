\documentclass{article}
\usepackage{graphicx}
\usepackage[utf8]{inputenc}
\usepackage{listings}
\usepackage{color}
\usepackage{upquote}

\definecolor{bluekeywords}{rgb}{0.13,0.13,1}
\definecolor{greencomments}{rgb}{0,0.5,0}
\definecolor{redstrings}{rgb}{0.9,0,0}
 
\lstdefinelanguage{FSharp}%
{morekeywords={let, override, new, match, with, rec, open, module, namespace, type, of, member, % 
and, for, while, true, false, in, do, begin, end, fun, function, return, yield, try, %
mutable, if, then, else, cloud, async, static, use, abstract, interface, inherit, finally },
  otherkeywords={ let!, return!, do!, yield!, use!, var, from, select, where, order, by },
  keywordstyle=\color{bluekeywords},
  sensitive=true,
  basicstyle=\ttfamily,
	breaklines=true,
  xleftmargin=\parindent,
  aboveskip=\bigskipamount,
	tabsize=4,
  morecomment=[l][\color{greencomments}]{///},
  morecomment=[l][\color{greencomments}]{//},
  morecomment=[s][\color{greencomments}]{{(*}{*)}},
  morestring=[b]",
  showstringspaces=false,
  literate={`}{\`}1,
  stringstyle=\color{redstrings},
}

\title{10g rapport}
\author{Henrik Flindt\\Nicolas Dyhrman\\Adrian Joensen}
\date{\today}

\begin{document}
    \maketitle
    
    \section*{Wolf in Moose's Clothing}
    \textit{"A single type of bird can be called a goose, but more is geese, but the plural of moose is not meese, and finally one wolf becomes several wolves. English is like coding. Nobody really know why we do it that way we do, but people on the internet will yell at you for getting it wrong."} \newline -Based on common saying. \newline \newline
    The main assignment is the creation of a game, that mimic the relations between mooses and wolfs in a closed park. Each iteration of the game will see the animals move, reproduce and potentially eat a moose. The game is played from the command line interface, by calling its main function called \verb|experimentWAnimals.exe| and give it eight arguments, that fits with the assignment specifications. If done correct, afther the program has run its cause a text file is created with information about the game. 
    
    \section{Main}
    The main function was designed to sanitize the user input, and only allowing valid inputs. First it is checked if all the inputs are eighter integers, or in the case of the second argument, a string containing ".txt" in it. \newline Afterwards several minimum values was implemented, no max values were chosen. While this could be valid as to avoide overflows, all functions works on the premise of list, and thus overflow could only occur if it is an int32 overflow. Since the program begins to take prolonged time when the animal count increases, it is believed that this overflow risk is minimal in a human lifetime. All integer values give (except for the tick int) must be above 0. \newline While the code can handle 0 animals, a follow effect is that the other values then also should be zero. It was decided to solve this problem with avoiding it. As for the final tick int that can be all the subsets of integers, it is used to check that first round placement (i.e tick = 0) is random, and that a fil is always created (tick < 0 ).\newline The overall design is a row of if-statments. It's a simple code, but quite effective. 
    
    \section{Manual}
   		fsharpi animalsSmall.fsi animalsSmall.fs animalsSmall.fsx
   		\\
   		fsharpc animalsSmall.fsi animalsSmall.fs animalsSmall.fsx
    	\\
    	mono animalsSmall.exe animalsSmall.exe animalsSmall.exe
    \section{Design}
    	We will use Jon's template, so many of the objects will remain the same, except the enviroment to which we will add all the behaviors and events.
    	\\
    	To move the animals, we pick a vector from 8('cause there are only 8 directions), check if it's a valid move('cause  the animal could be at the edges of the board) and change the animals' position with the vector.
    	\\
    	To make the order of animals random, we first look at the wolf list and create a tuple list, where the first element will contain their symbol "w" and the second element will contain the index of the wolves. The same is done to the moose list and we will then join the two lists and shuffle. After the tuple list is shuffled, we will use it to determined who's turn it is.
    	\\
    	To shuffle the tuple list, we will use a function with a for loop that will pick a random index, remove the element from the tuple list and also put it in a new list. The function should return the new list as a shuffled tuple list.
    	\\
    	To run the simulation, we will use an object with a while loop.
    \subsection{Two-lists makes a board}
    \subsection{Animals}
    \subsubsection{Moose}
    \subsubsection{Wolf}    

    \section{Implementation}
		\lstset{language=FSharp}

		\begin{lstlisting}
/// An animal is a base class. It has a position and a reproduction counter.
type animal (symb : symbol, repLen : int) =
  let mutable _reproduction = rnd.Next(1,repLen)
  let mutable _pos : position option = None
  let _symbol : symbol = symb

  member this.symbol = _symbol
  member this.position
    with get () = _pos
    and set aPos = _pos <- aPos
  member this.reproduction = _reproduction
  member this.updateReproduction () =
    _reproduction <- _reproduction - 1
  member this.resetReproduction () =
    _reproduction <- repLen

  override this.ToString () =
    string this.symbol
		\end{lstlisting}
		
         
\section{Whitebox testing}
    \subsection{moose.tick}
    moose.tick went as expected and only gave us an option if the mooses $repLen$ was 0 or under. And otherwise gave us a None as it was not ready.
    
    \subsection{wolf.tick}
    wolf.tick went as expected and only gave us an option if the wolfs $repLen$ was 0 or under. And otherwise gave us a None as it was not ready.
    
    \subsection{enviroment.genMoveVector}
    Here was a problem since this function works purly by a randomizer it was hard for os to test and check if it was correct, although what we did was testing that it will give diffrent result when we run our whitebox test.
    
    \subsection{enviroment.moveAnimal}
    moveAnimal went as expected and gave us the answers we expected.
    
    \subsection{enviroment.countMoose}
    The method went as expected and counted all the living mooses in the system.
    
    \subsection{enviroment.countWolfs}
    The method went as expected and counted all the living wolfs in the system.
    
    \subsection{enviroment.checkForAnimalsAtPosition}
    the method went as expected, and send a bool back wether there was animals at the specific position
    
    \subsection{enviroment.checkValidMove}
    The method went as expected, and send back a bool of wether the move the animal wanted to do, is a valid move.
    
    \subsection{enviroment.findMooseAtPosition}
    The method went as expected, and send back a bool of wether there was a moose at this position or not.
    
    \subsection{enviroment.checkFieldsAround}
    The method went as expected, and checked wether there was any valid moves around the given position
    
    \subsection{enviroment.CheckEating}
    The method went as expected, and sent back a generic list of all the the positions where there would be a moose.
    
    \subsection{enviroment.KillMooseFromPosition}
    The method went as expected, and made the moose at that position's, position to be None.
    
    \subsection{enviroment.removeDeadAnimals}
    The method went as expected, and killed all animals whom's position was None.
    
    \subsection{enviroment.tick}
    This method just called 2 others and therefore we didnt see the nessecarity of us actually testing it.
    
    \subsection{enviroment.makeQueue}
    Since this works by putting in all of them by random in random places, we have just displayed them, and looked that they were not the same, and that every animal was in the scrambled list. Also checked that they were scrambled different that the other 2 that we made.
    
    \subsection{WriteOutInfo}
    Since this is basicly the same as the function made for us, but with some text on it we assume it will still work, as assumed when it was given to us. Also tested while looking at our runs of our program.
    
    \section{Conclusion}
     

\end{document}
